apiVersion: v1
kind: ConfigMap
metadata:
  name: atlan-NAME
data:
  NAME-api: "10"
  config: |
    {
        "properties": {
            "connection": {
                "type": "string",
                "required": false,
                "ui": {
                    "widget": "connection",
                    "label": "",
                    "placeholder": "Connection Name",
                    "connectionOptions": false
                }
            },
            "publish-mode": {
              "type": "string",
              "enum": ["production", "test", "dev"],
              "default": "production",
              "enumNames": ["Production", "Test", "Development"],
              "ui": {
                "widget": "select",
                "label": "Run Mode",
                "grid": 4,
                "placeholder": "Connection Mode"
              }
            },
            "credentials-fetch-strategy": {
              "type": "string",
              "enum": ["k8s_secret", "credential_guid"],
              "default": "credential_guid",
              "enumNames": ["k8s Secret Key", "Credential Guid"],
              "ui": {
                "widget": "select",
                "label": "Credential Type",
                "placeholder": "Credential Type"
              }
            },
            "credential-guid": {
                "type": "string",
                "ui": {
                    "widget": "credential",
                    "label": "",
                    "credentialType": "atlan-connectors-NAME",
                    "placeholder": "Credential Guid",
                    "hidden": false
                }
            },
            "credential-kube-secret-name": {
              "type": "string",
              "ui": {
                "label": "Credential Secret Name",
                "placeholder": "Credential Secret Name",
                "hidden": true
              }
            },
            "atlas-auth-type": {
              "type": "string",
              "enum": ["internal", "apikey"],
              "default": "internal",
              "enumNames": ["Internal", "API Key"],
              "ui": {
                "widget": "select",
                "label": "Atlas Authentication Type",
                "placeholder": "Atlas Authentication  Type",
                "hidden": true
              }
            },
            "runtime-properties": {
              "type": "object",
              "ui": {
                "label": "Run time properties",
                "hidden": true
              }
            },
            "include-filter": {
              "type": "object",
              "additionalProperties": {
                "type": "array"
              },
              "default": "{}",
              "ui": {
                "widget": "apitree",
                "connectorConfigName": "atlan-connectors-NAME",
                "credential": "credential-guid",
                "label": "Include Metadata",
                "description": "Selected assets only will be processed. Exclude gets preference over include.",
                "grid": 4
              }
            },
            "exclude-filter": {
              "type": "object",
              "additionalProperties": {
                "type": "array"
              },
              "default": "{}",
              "ui": {
                "widget": "apitree",
                "connectorConfigName": "atlan-connectors-NAME",
                "credential": "credential-guid",
                "label": "Exclude Metadata",
                "description": "Selected assets will not be processed.",
                "grid": 4
              }
            }
        },
        "anyOf": [
          {
            "properties": {
              "credentials-fetch-strategy": {
                "const": "k8s_secret"
              }
            },
            "required": ["credential-kube-secret-name"]
          },
          {
            "properties": {
              "credentials-fetch-strategy": {
                "const": "credential_guid"
              }
            },
            "required": ["credential-guid"]
          }
        ],
        "steps": [
            {
                "id": "credential",
                "title": "Credential",
                "description": "Credential Details",
                "properties": [
                    "credential-guid"
                ]
            },
            {
                "id": "connection",
                "title": "Connection",
                "description": "Connection Details",
                "properties": [
                    "connection"
                ]
            },
            {
          "id": "metadata",
          "title": "Metadata",
          "description": "Metadata",
          "properties": ["include-filter", "exclude-filter"]
        }
        ]
    }